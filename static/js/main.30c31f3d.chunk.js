(this.webpackJsonpdcard_2020_web_frontend_intern_homework=this.webpackJsonpdcard_2020_web_frontend_intern_homework||[]).push([[0],{36:function(e,t,n){e.exports=n(67)},41:function(e,t,n){},42:function(e,t,n){},67:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),c=n(31),r=n.n(c),i=n(11),l=(n(41),n(9)),u=(n(42),n(8)),s=n(5),d=n(21),m=n(16),f=n.n(m),p=function(e){var t=e.items,n=e.itemBuilder,c=e.fetchMore,r=Object(a.useState)(!1),i=Object(u.a)(r,2),l=i[0],s=i[1];Object(a.useEffect)((function(){return window.addEventListener("scroll",d),function(){return window.removeEventListener("scroll",d)}})),Object(a.useEffect)((function(){l&&(c(),s(!1))}),[c,l]);var d=function(){Math.round(document.documentElement.scrollTop+window.innerHeight)>=document.documentElement.scrollHeight&&s(!0)};return o.a.createElement("div",{onScroll:d},t.map((function(e){return n(e)})),l&&"Fetching more posts...")},b=function(){var e=Object(a.useState)(),t=Object(u.a)(e,2),n=t[0],c=t[1],r=function(e){var t=Object(a.useState)([]),n=Object(u.a)(t,2),o=n[0],c=n[1];return Object(a.useEffect)((function(){var t=e?"&before=".concat(e):"";f.a.get("https://www.dcard.tw/_apicors/posts?popular=true".concat(t)).then((function(e){c((function(t){return[].concat(Object(d.a)(t),Object(d.a)(e.data))}))}))}),[e]),o}(n),i=Object(l.g)(),m=Object(l.j)().url,b=Object(l.h)();return o.a.createElement(o.a.Fragment,null,o.a.createElement(s.a,{sx:{maxWidth:["80%","60%","50%"],mx:"auto",px:3,backgroundColor:"#eee"}},o.a.createElement(p,{items:r,itemBuilder:function(e){return o.a.createElement(s.b,{key:e.id,sx:{p:3,cursor:"pointer"},onClick:function(){return i.push({pathname:"".concat(m,"/").concat(e.forumAlias,"/p/").concat(e.id),state:{isModal:b}})}},o.a.createElement(s.c,{color:"rgba(0, 0, 0, 0.95)",fontWeight:"600"},e.title),o.a.createElement(s.d,{color:"rgba(0, 0, 0, 0.6)"},e.excerpt))},fetchMore:function(){return c(r[r.length-1].id)}})))},h=function(){var e=Object(l.i)().id,t=Object(a.useState)(),n=Object(u.a)(t,2),c=n[0],r=n[1];return Object(a.useEffect)((function(){f.a.get("https://www.dcard.tw/_apicors/posts/".concat(e)).then((function(e){r(e.data)}))}),[e]),o.a.createElement(s.a,{sx:{width:["80%","60%","50%"],minHeight:"100%",mx:"auto",px:3,backgroundColor:"#eee"}},o.a.createElement(s.c,null,c&&c.title),o.a.createElement(s.d,{sx:{whiteSpace:"pre-line"}},c&&c.content))},w=function(e){var t=e.visible,n=e.component,c=e.onCancel;return Object(a.useEffect)((function(){return document.body.style.position="fixed",document.body.style.top="-".concat(window.scrollY,"px"),function(){var e=document.body.style.top;document.body.style.position="",document.body.style.top="",window.scrollTo(0,-1*parseInt(e||"0"))}})),t&&o.a.createElement(s.a,{sx:{position:"fixed",height:"100vh",width:"100vw",display:"flex",alignItems:"flex-start",justifyContent:"center",overflowY:"scroll"}},o.a.createElement(s.a,{sx:{position:"fixed",height:"100vh",width:"100vw",backgroundColor:"rgba(22, 22, 22, 0.9)",zIndex:-1},onClick:c}),n)};var E=function(){var e=Object(l.g)(),t=Object(l.h)(),n=t.state&&t.state.isModal;return o.a.createElement(o.a.Fragment,null,n&&o.a.createElement(l.b,{path:"/f/:forumAlias/p/:id"},o.a.createElement(w,{visible:!0,component:o.a.createElement(o.a.Fragment,null,"Modal",o.a.createElement(h,null)),onCancel:function(){return e.goBack()}})),o.a.createElement(l.d,{location:n||t},o.a.createElement(l.b,{path:"/f/:forumAlias/p/:id"},o.a.createElement(h,null)),o.a.createElement(l.b,{exact:!0,path:"/f"},o.a.createElement(b,null)),o.a.createElement(l.b,{exact:!0,path:"/"},o.a.createElement(l.a,{to:"/f"}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(i.a,null,o.a.createElement(E,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[36,1,2]]]);
//# sourceMappingURL=main.30c31f3d.chunk.js.map