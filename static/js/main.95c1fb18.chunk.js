(this.webpackJsonpdcard_2020_web_frontend_intern_homework=this.webpackJsonpdcard_2020_web_frontend_intern_homework||[]).push([[0],{36:function(e,t,n){e.exports=n(67)},41:function(e,t,n){},42:function(e,t,n){},67:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(31),o=n.n(c),l=n(11),i=(n(41),n(9)),u=(n(42),n(8)),s=n(1),m=n(21),f=n(16),d=n.n(f),p=function(e){var t=e.items,n=e.itemBuilder,c=e.fetchMore,o=Object(a.useState)(!1),l=Object(u.a)(o,2),i=l[0],s=l[1];Object(a.useEffect)((function(){return window.addEventListener("scroll",m),function(){return window.removeEventListener("scroll",m)}})),Object(a.useEffect)((function(){i&&(c(),s(!1))}),[c,i]);var m=function(){Math.ceil(document.documentElement.scrollTop+window.innerHeight)>=document.documentElement.scrollHeight&&s(!0)};return r.a.createElement("div",{onScroll:m},t.map((function(e){return n(e)})),i&&"Fetching more posts...")},h=function(){var e=Object(a.useState)(),t=Object(u.a)(e,2),n=t[0],c=t[1],o=function(e){var t=Object(a.useState)([]),n=Object(u.a)(t,2),r=n[0],c=n[1];return Object(a.useEffect)((function(){var t=e?"&before=".concat(e):"";d.a.get("https://www.dcard.tw/_apicors/posts?popular=true".concat(t)).then((function(e){c((function(t){return[].concat(Object(m.a)(t),Object(m.a)(e.data))}))})).catch((function(e){return console.log(e)}))}),[e]),r}(n),l=Object(i.g)(),f=Object(i.j)().url,h=Object(i.h)();return r.a.createElement(r.a.Fragment,null,r.a.createElement(s.a,{sx:{maxWidth:["80%","60%","50%"],mx:"auto",px:3,backgroundColor:"#eee"}},r.a.createElement(p,{items:o,itemBuilder:function(e){return r.a.createElement(s.b,{key:e.id,sx:{p:3,cursor:"pointer"},onClick:function(){return l.push({pathname:"".concat(f,"/").concat(e.forumAlias,"/p/").concat(e.id),state:{isModal:h}})}},r.a.createElement(s.d,{py:3,color:"rgba(0, 0, 0, 0.95)",fontWeight:"600"},e.title),r.a.createElement(s.g,{color:"rgba(0, 0, 0, 0.6)"},e.excerpt))},fetchMore:function(){return c(o[o.length-1].id)}})))},g=function(){var e=Object(i.i)().id,t=Object(a.useState)(),n=Object(u.a)(t,2),c=n[0],o=n[1];Object(a.useEffect)((function(){d.a.get("https://www.dcard.tw/_apicors/posts/".concat(e)).then((function(e){o(e.data)}))}),[e]);return r.a.createElement(s.a,{sx:{width:["80%","60%","50%"],minHeight:"100%",mx:"auto",p:5,backgroundColor:"#eee"}},r.a.createElement(s.d,{py:3},c&&c.title),r.a.createElement(s.c,{pt:1,pb:4},r.a.createElement(s.f,{href:"#",px:1,sx:{textDecoration:"none"}},c&&c.forumName),r.a.createElement(s.g,{px:1},c&&function(e){var t=new Date(e);return"\n      ".concat(t.getFullYear()!==(new Date).getFullYear()?t.getFullYear()+" \u5e74 ":"","\n      ").concat(t.getMonth()," \u6708 ").concat(t.getDate()," \u65e5 ").concat(t.getHours()," : ").concat(t.getMinutes(),"\n    ")}(c.createdAt))),r.a.createElement(r.a.Fragment,null,c&&c.content.split("\n").map((function(e){return e.length?null!=e.match(/\.(jpeg|jpg|gif|png)$/)?r.a.createElement(s.e,{p:3,src:e,onError:function(){return r.a.createElement(s.f,{href:e,target:"_blank"},e)}}):function e(t){var n=t.match(/((http(s)?(:\/\/))+(www\.)?([\w\-./])*(\.[a-zA-Z]{2,3}\/?))[^\s\b\n|]*[^.,;:?!@^$ -]/);if(null===n)return r.a.createElement(s.g,{p:1},t);var a=n[0];return t.split(a).map((function(t,n){return 0===n?r.a.createElement(r.a.Fragment,null,""!==t?r.a.createElement(s.g,{p:1,display:"inline-block"},t):null,r.a.createElement(s.f,{href:a,target:"_blank",sx:{wordBreak:"break-all"}},a)):e(t)}))}(e):r.a.createElement(s.g,{sx:{whiteSpace:"pre-line"}},"\n")}))))},b=function(e){var t=e.visible,n=e.component,c=e.onCancel,o=window.scrollY;return Object(a.useEffect)((function(){return document.body.style.position="fixed",document.body.style.top="-".concat(window.scrollY,"px"),function(){document.body.style.position="",document.body.style.top="",window.scrollTo(0,1*parseInt(o||"0"))}})),t&&r.a.createElement(s.a,{sx:{position:"fixed",height:"100vh",width:"100vw",display:"flex",alignItems:"flex-start",justifyContent:"center",overflowY:"scroll"}},r.a.createElement(s.a,{sx:{position:"fixed",height:"100vh",width:"100vw",backgroundColor:"rgba(22, 22, 22, 0.9)",zIndex:-1},onClick:c}),n)};var E=function(){var e=Object(i.g)(),t=Object(i.h)(),n=t.state&&t.state.isModal;return r.a.createElement(r.a.Fragment,null,n&&r.a.createElement(i.b,{path:"/f/:forumAlias/p/:id"},r.a.createElement(b,{visible:!0,component:r.a.createElement(r.a.Fragment,null,"Modal",r.a.createElement(g,null)),onCancel:function(){return e.goBack()}})),r.a.createElement(i.d,{location:n||t},r.a.createElement(i.b,{path:"/f/:forumAlias/p/:id"},r.a.createElement(g,null)),r.a.createElement(i.b,{exact:!0,path:"/f"},r.a.createElement(h,null)),r.a.createElement(i.b,{path:"/"},r.a.createElement(i.a,{to:"/f"}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(l.a,null,r.a.createElement(E,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[36,1,2]]]);
//# sourceMappingURL=main.95c1fb18.chunk.js.map